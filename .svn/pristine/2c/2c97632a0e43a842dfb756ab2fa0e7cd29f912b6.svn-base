<?php
namespace LITE;
class Cache_Helper {
	const CACHE_REDIS = 'Cache_Redis';
	const CACHE_FILE = 'Cache_File';
	const CACHE_MEMCACHE = 'Cache_Memcache';
	const CACHE_SESSION = 'Cache_Session';
	private static $SUPPORT_CACHE_LIST = array(
		self::CACHE_FILE, self::CACHE_MEMCACHE, self::CACHE_REDIS, self::CACHE_SESSION
	);

	public static function init($type=null, $config=array()){
		if(!$type){
			$content_cache = Config::get('app/cache/content') ?: array();
			$type = $content_cache['type'] ?: self::CACHE_FILE;      //缺省使用配置类型
			if(empty($config)){
				$config = $content_cache ?: array();              //缺省使用文件配置
			}
		}
		if(!in_array($type, self::$SUPPORT_CACHE_LIST)){
			throw new Exception('NO SUPPORT CACHE TYPE:'.$type);
		}
		$result = call_user_func(array('\\'.__NAMESPACE__.'\\'.$type, 'instance'), $config);
		return $result;
	}
}